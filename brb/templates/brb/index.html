
{% load static %}

<!DOCTYPE html>
<html lang="en">
    <head>
        <title>{% block title %}Be Right Back{% endblock %}</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">
        <link type="text/css" href="{% static 'brb/styles.css' %}" rel="stylesheet">
    </head>
    <body>
        <div class="container">
            <h1>Be Right Back</h1>
            <div>
                {% if user.is_authenticated %}
                    Hi! <strong>{{ user }} </strong>
                    </br>
                    Current Time: <strong>{{ time|date:'H:i (Y/m/d)' }}</strong></br></br>  
                    {% if status %}                        
                        Active Away Status:  <strong>Yes</strong> 
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#198754" class="bi bi-check-circle-fill" viewBox="0 0 16 16">
                            <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
                            </svg> <br></br>    
                        <div class="card mx-auto"  style="width: 18rem;">                            
                            <div class="card-body   ">
                                <h5 class="card-title" style="color: black;">Active Status</h5>
                                <p class="card-text" style="color: black;">Reason: <strong>{{ data.reason }}</strong></p>
                                <p class="card-text" style="color: black;">Estimated Return: <strong>{{ data.return_time|date:'H:i' }} </strong></p>
                                <form action="{% url 'startpage' %}" method="post">
                                    {% csrf_token %}
                                    <input name="reset" class="btn btn-warning" type="submit" value="Remove Status">
                                </form>
                            </div>
                        </div>
                        <br>    
                    {% else %}
                        Active Away Status: <strong>No</strong>
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="red" class="bi bi-slash-circle-fill" viewBox="0 0 16 16">
                            <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-4.646-2.646a.5.5 0 0 0-.708-.708l-6 6a.5.5 0 0 0 .708.708l6-6z"/>
                            </svg> <br></br> 
                   {% endif %}
                   <strong>{{ message }}</strong>
                   <div class="card mx-auto bg-dark text-bg-dark p-4"  style="width: 25rem;">
                        {% if status %}<h3>Update Status</h3>{% else %} <h3>New Status</h3>{% endif %}</br>
                        
                        <form action="{% url 'startpage' %}" method="post">
                        {% csrf_token %} 
                                <div class="form-group">
                                    <label for="reason" class="form-label">Reason</label>   
                                    <input class="form-control" autofocus type="text" name="reason" placeholder="Reason (Can be empty)">
                                </div>
                                <div class="form-group">
                                    <input class="form-control" type="number" name="hour" placeholder="Hour" min="1" max="8">
                                </div>
                                <div class="form-group">
                                    <input class="form-control" type="number" name="minute" placeholder="Minute" min="0" max="60">
                                </div>
                               
                                <input name="newdata" class="btn btn-primary" type="submit" value="Submit"></br>
                        </form>
                    </div>

                    </br></br>
                    <a href={% url 'logout' %}>Logout</a>
                {% else %}
                    Not signed in.</br>
                    <a href={% url 'login' %}>Login</a></br>
                    <a href={% url 'register' %}>Register</a></br>
                {% endif %}
            </div>
        </div>
        {% block body %}
        {% endblock %}
    </body>
</html>
